(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{679:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));n(80);var o=n(13),r=n(23),l=n(26),h=n(33),c=n(14);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(c.a)(t);if(e){var r=Object(c.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(t){Object(l.a)(n,t);var e=d(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"hasComment",get:function(){return null!==this.comment&&""!==this.comment}}],[{key:"entity",get:function(){return"group"}},{key:"fields",value:function(){return{id:this.string(""),type:this.string(""),parent_id:this.string(null).nullable(),title:this.string(null).nullable(),comment:this.string(null).nullable(),icon:this.string("folder"),params:this.attr(null),relationshipNames:this.attr([]).nullable(),deviceIds:this.attr(null),children:this.hasMany(n,"parent_id")}}}]),n}(n(22).b)},740:function(t,e,n){var content=n(835);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(94).default)("4b113396",content,!0,{sourceMap:!1})},834:function(t,e,n){"use strict";n(740)},835:function(t,e,n){var o=n(93)(!1);o.push([t.i,".fb-groups-list-view__items-container{display:flex;flex-wrap:wrap;flex-direction:row;padding:5px}@media (max-width:767px){.fb-groups-list-view__items-container{padding:15px 5px}}@media (min-width:768px){.fb-groups-list-view__items-container>div{flex:0 0 50%;max-width:50%}}@media (min-width:1200px){.fb-groups-list-view__items-container>div{flex:0 0 33.333333%;max-width:33.333333%}}.fb-groups-list-view__new-group{text-align:center;margin:10px 0}.fb-groups-list-view__off-canvas-body{overflow-y:auto}",""]),t.exports=o},908:function(t,e,n){"use strict";n.r(e);n(32),n(95),n(91),n(68),n(42),n(84),n(139),n(49),n(56),n(102),n(107),n(90),n(105),n(108);var o=n(16),r=n(88),l=n(679),h={name:"GroupsListItem",props:{group:{type:Object,required:!0}},methods:{oneClick:function(t){this.$emit("click",t,this.group)}}},c=n(58),d=Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-item",{staticClass:"fb-groups-list-item__container",on:{click:t.oneClick}},[n("template",{slot:"icon"},[n("font-awesome-icon",{attrs:{icon:t.$groupIcon(t.group)}})],1),t._v(" "),n("template",{slot:"heading"},[t._v("\n    "+t._s(t.group.name)+"\n  ")]),t._v(" "),t.group.hasComment?n("template",{slot:"sub-heading"},[t._v("\n    "+t._s(t.group.comment)+"\n  ")]):t._e()],2)}),[],!1,null,null,null).exports;function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,h=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){h=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(h)throw r}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f={opened:null,items:{create:{name:"create",route:{hash:r.l,length:7}},detail:{name:"detail",id:null,route:{hash:r.m,length:8}},settings:{name:"settings",id:null,route:{hash:r.n,length:10}}}},v={name:"GroupsListPage",components:{GroupListItem:d,GroupDetail:function(){return{component:n.e(28).then(n.bind(null,920)),loading:o.O,error:o.P,timeout:1e4}}},transition:"fade",data:function(){return{window:Object.assign({},f),click:{delay:200,clicks:0,timer:null},isMounted:!1}},fetch:function(t){var e=t.app,n=t.store,o=t.error;if(!n.getters["entities/group/firstLoadFinished"]())return n.dispatch("entities/group/fetch",null,{root:!0}).then((function(){var t=l.a.query().count();n.dispatch("template/resetHeadings",null,{root:!0}),n.dispatch("template/resetButtons",null,{root:!0}),n.dispatch("template/setHeading",{heading:e.i18n.t("application.headings.groups.list"),subHeading:e.i18n.tc("application.subHeadings.groups.list",t,{count:t})},{root:!0}),n.dispatch("template/setActionButton",{name:e.i18n.t("application.buttons.add.title")},{root:!0}),n.dispatch("template/addHeadingTab",{name:e.i18n.t("application.buttons.things.title"),link:e.localePath(e.$routes.things.list)},{root:!0}),n.dispatch("template/addHeadingTab",{name:e.i18n.t("application.buttons.groups.title"),link:e.localePath(e.$routes.groups.list)},{root:!0}),n.dispatch("app/bottomMenuExpand",null,{root:!0})})).catch((function(){o({statusCode:503,message:"Something went wrong"})}))},head:function(){return{title:this.$t("meta.groups.list.title")}},computed:{windowSize:function(){return this.$store.state.app.windowSize},groups:function(){return l.a.query().orderBy("label").get()},fetchingGroups:function(){return l.a.getters("fetching")()}},watch:{windowSize:function(t){"xs"===t&&(this.window.opened===this.window.items.detail.name?this.$router.push(this.localePath({name:this.$routes.things.detail,params:{id:this.window.items.detail.id}})):this.window.opened===this.window.items.settings.name?this.$router.push(this.localePath({name:this.$routes.things.detail,params:{id:this.window.items.settings.id},hash:r.n})):this.window.opened===this.window.items.create.name&&this.$router.push(this.localePath({name:this.$routes.things.create})))},fetchingGroups:function(t){t||this._checkRoute()},things:function(){this._configureNavigation()}},beforeMount:function(){var t=this;0!==l.a.query().count()||this.fetchingGroups||l.a.getters("firstLoadFinished")()||l.a.dispatch("fetch").catch((function(){t.$nuxt.error({statusCode:503,message:"Something went wrong"})})),this._configureNavigation()},mounted:function(){this.fetchingGroups||this._checkRoute(),this.$bus.$emit("wait-page_reloading",!1),this.isMounted=!0},methods:{openView:function(view,t){if(Object.prototype.hasOwnProperty.call(this.window.items,view)){for(var e in this.window.items)Object.prototype.hasOwnProperty.call(this.window.items,e)&&Object.prototype.hasOwnProperty.call(this.window.items[e],"id")&&(this.window.items[e].id=null);switch(view){case this.window.items.detail.name:if("xs"===this.windowSize)return this.$bus.$emit("wait-page_reloading",10),void this.$router.push(this.localePath({name:this.$routes.groups.detail,params:{id:t}}));this.$router.push(this.localePath({name:this.$routes.groups.list,hash:"".concat(this.window.items.detail.route.hash,"-").concat(t)}));break;case this.window.items.settings.name:if("xs"===this.windowSize)return this.$bus.$emit("wait-page_reloading",10),void this.$router.push(this.localePath({name:this.$routes.groups.detail,params:{id:t},hash:r.n}));this.$router.push(this.localePath({name:this.$routes.groups.list,hash:"".concat(this.window.items.settings.route.hash,"-").concat(t)}));break;case this.window.items.create.name:if("xs"===this.windowSize)return this.$bus.$emit("wait-page_reloading",10),void this.$router.push(this.localePath(this.$routes.groups.create));this.$router.push(this.localePath({name:this.$routes.groups.list,hash:this.window.items.create.route.hash}))}if(this.window.opened=view,Object.prototype.hasOwnProperty.call(this.window.items[view],"id")&&void 0!==t)this.window.items[view].id=t,null===l.a.find(t)&&this.closeView()}},closeView:function(){this.$router.push(this.localePath(this.$routes.things.list)),Object.assign(this.window,f),this.$el.focus()},oneClick:function(t,e){var n,o=this,r=m(this.getEventElementsPath(t));try{for(r.s();!(n=r.n()).done;){var l=n.value;if("function"==typeof l.getAttribute&&("button"===l.getAttribute("role")||"dialog"===l.getAttribute("role")))return}}catch(t){r.e(t)}finally{r.f()}this.click.clicks++,1===this.click.clicks?this.click.timer=setTimeout((function(){o.openView(o.window.detail.name,e.id),o.click.clicks=0}),this.click.delay):(clearTimeout(this.click.timer),this.click.clicks=0,this.openView(this.window.settings.name,e.id))},actionButtonAction:function(){this.openView(this.window.items.create.name)},_checkRoute:function(){""!==this.$route.hash&&(this.$route.hash.includes(this.window.items.detail.route.hash)?this.openView(this.window.items.detail.name,this.$route.hash.substring(this.window.items.detail.route.length)):this.$route.hash.includes(this.window.items.settings.route.hash)?this.openView(this.window.items.settings.name,this.$route.hash.substring(this.window.items.settings.route.length)):this.$route.hash.includes(this.window.items.create.route.hash)&&this.openView(this.window.items.create.name))},_configureNavigation:function(){this.$store.dispatch("template/resetHeadings",null,{root:!0}),this.$store.dispatch("template/resetButtons",null,{root:!0}),this.$store.dispatch("template/setHeading",{heading:this.$t("application.headings.groups.list"),subHeading:this.$tc("application.subHeadings.groups.list",this.groups.length,{count:this.groups.length})},{root:!0}),this.groups.length&&this.$store.dispatch("template/setActionButton",{name:this.$t("application.buttons.add.title")},{root:!0}),this.$store.dispatch("template/addHeadingTab",{name:this.$t("application.buttons.things.title"),link:this.localePath(this.$routes.things.list)},{root:!0}),this.$store.dispatch("template/addHeadingTab",{name:this.$t("application.buttons.groups.title"),link:this.localePath(this.$routes.groups.list)},{root:!0}),this.$store.dispatch("app/bottomMenuExpand",null,{root:!0})}}},$=(n(834),Object(c.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fb-groups-list-view__container"},[n("div",{staticClass:"fb-groups-list-view__items-container"},t._l(t.groups,(function(e){return n("group-list-item",{key:e.id,attrs:{group:e},on:{click:t.oneClick}})})),1),t._v(" "),"xs"!==t.windowSize&&t.isMounted?n("off-canvas",{attrs:{show:t.view.opened===t.view.items.detail.name||t.view.opened===t.view.items.settings.name},on:{close:t.closeView}},[t.view.opened===t.view.items.detail.name||t.view.opened===t.view.items.settings.name?n("group-detail",{attrs:{slot:"body",id:t.view.opened===t.view.items.detail.name?t.view.items.detail.id:t.view.items.settings.id,settings:t.view.opened===t.view.items.settings.name},on:{close:t.closeView},slot:"body"}):t._e()],1):t._e(),t._v(" "),t.fetchingGroups&&0===t.groups.length?n("fb-ui-loading-box",{attrs:{text:t.$t("groups.texts.loadingGroups")}}):t._e(),t._v(" "),t.fetchingGroups||0!==t.groups.length?t._e():[n("no-results",{attrs:{message:t.$t("groups.texts.noGroups"),icon:"folder"}}),t._v(" "),n("div",{staticClass:"fb-groups-list-view__new-group"},[n("fb-ui-button",{attrs:{variant:"outline-primary",name:"press"},on:{click:function(e){return e.preventDefault(),t.openGroupCreate(e)}}},[t._v("\n        "+t._s(t.$t("groups.buttons.addNew.title"))+"\n      ")])],1)]],2)}),[],!1,null,null,null));e.default=$.exports}}]);