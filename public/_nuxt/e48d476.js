(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{771:function(e,t,n){var content=n(896);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(94).default)("5dcbfa20",content,!0,{sourceMap:!1})},772:function(e,t,n){var content=n(898);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(94).default)("e8a612fe",content,!0,{sourceMap:!1})},895:function(e,t,n){"use strict";n(771)},896:function(e,t,n){var o=n(93)(!1);o.push([e.i,".fb-devices-phone-settings-device__heading{font-size:1.8rem;line-height:1.33333;border-bottom:1px solid #ddd;padding-left:1.5rem;margin:1rem 0 0}.fb-devices-phone-settings-device__channels .fb-ui-items-container__items{padding:0}.fb-devices-phone-settings-device__item-remove{color:#d9831f}",""]),e.exports=o},897:function(e,t,n){"use strict";n(772)},898:function(e,t,n){var o=n(93)(!1);o.push([e.i,".fb-devices-detail-view__container{height:100%;max-height:100%}.fb-devices-detail-view__container-settings{overflow:scroll}.fb-devices-detail-view__container-loading{display:flex;flex-direction:row;align-items:center}.fb-devices-detail-view__loading{flex:0 0 50%;max-width:50%;margin:0 auto}",""]),e.exports=o},907:function(e,t,n){"use strict";n.r(t);n(139),n(49),n(56),n(42),n(68),n(32),n(64);var o,r=n(20),c=n(16),l=n(10),d=n.n(l),m=n(88),v=n(12),f=(n(21),n(775)),h=n(35),_=(n(41),n(273)),O=n(783),w=Object(r.b)({name:"DevicesPhoneSettingsChannel",components:{DevicesSettingsChannelRename:O.a},props:{device:{type:Object,required:!0},channel:{type:Object,required:!0}},setup:function(e,t){var n=Object(r.j)(!1),o=Object(r.j)(c.g.NONE),l=Object(r.j)(!1),d=Object(r.j)(!1);function m(){t.emit("close")}return Object(r.g)((function(){d.value=!0})),Object(r.p)((function(){return o.value}),(function(e){e===c.g.WORKING&&d.value&&m()})),{remoteFormSubmit:n,remoteFormResult:o,remoteFormReset:l,handleSubmitForm:function(){n.value=!0},handleClose:m,modalVariantTypes:c.cb}}}),T=n(58),R=Object(T.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("fb-ui-modal-window",{attrs:{variant:e.modalVariantTypes.PHONE,"ok-btn-text":e.$t("application.buttons.done.title"),"close-btn-text":e.$t("application.buttons.cancel.title")},on:{submit:e.handleSubmitForm,close:e.handleClose}},[n("template",{slot:"modal-title"},[e._v("\n    "+e._s(e.$t("devices.headings.channelSettings"))+"\n  ")]),e._v(" "),n("template",{slot:"modal-body"},[n("devices-settings-channel-rename",{attrs:{device:e.device,channel:e.channel,"remote-form-submit":e.remoteFormSubmit,"remote-form-result":e.remoteFormResult,"remote-form-reset":e.remoteFormReset},on:{"update:remoteFormSubmit":function(t){e.remoteFormSubmit=t},"update:remote-form-submit":function(t){e.remoteFormSubmit=t},"update:remoteFormResult":function(t){e.remoteFormResult=t},"update:remote-form-result":function(t){e.remoteFormResult=t},"update:remoteFormReset":function(t){e.remoteFormReset=t},"update:remote-form-reset":function(t){e.remoteFormReset=t}}})],1)],2)}),[],!1,null,null,null).exports,S=n(782);!function(e){e.EDIT="edit",e.RESET_CONFIRMATION="resetConfirmation"}(o||(o={}));var j,F=Object(r.b)({name:"DevicesPhoneSettingsDeviceChannel",components:{DevicesPhoneSettingsChannel:R,DevicesSettingsChannelReset:S.a},props:{device:{type:Object,required:!0},channel:{type:Object,required:!0}},setup:function(){var e=Object(r.i)({edit:{opened:!1},resetConfirmation:{opened:!1}});return{windowScreen:e,handleOpenWindow:function(t){e[t].opened=!0},handleCloseWindow:function(t){e[t].opened=!1},windowScreenTypes:o,sizeTypes:c.J,listItemTypes:_.a,buttonVariantTypes:c.N}}}),y=Object(T.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("list-item",{attrs:{variant:e.listItemTypes.LIST}},[n("template",{slot:"heading"},[e._v("\n      "+e._s(e.channel.title)+"\n    ")]),e._v(" "),n("template",{slot:"detail-large"},[n("fb-ui-button",{attrs:{variant:e.buttonVariantTypes.OUTLINE_DANGER,size:e.sizeTypes.EXTRA_SMALL},on:{click:function(t){return t.preventDefault(),e.handleOpenWindow(e.windowScreenTypes.EDIT)}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n        "+e._s(e.$t("application.buttons.edit.title"))+"\n      ")],1),e._v(" "),e.channel.control.includes("reset")?n("fb-ui-button",{attrs:{variant:e.buttonVariantTypes.OUTLINE_PRIMARY,size:e.sizeTypes.EXTRA_SMALL},on:{click:function(t){return t.preventDefault(),e.handleOpenWindow(e.windowScreenTypes.RESET_CONFIRMATION)}}},[n("font-awesome-icon",{attrs:{icon:"sync-alt"}}),e._v("\n        "+e._s(e.$t("application.buttons.reset.title"))+"\n      ")],1):e._e()],1)],2),e._v(" "),e.windowScreen.resetConfirmation.opened?n("devices-settings-channel-reset",{attrs:{device:e.device,channel:e.channel},on:{close:function(t){return e.handleCloseWindow(e.windowScreenTypes.RESET_CONFIRMATION)},reseted:function(t){return e.handleCloseWindow(e.windowScreenTypes.RESET_CONFIRMATION)}}}):e._e(),e._v(" "),e.windowScreen.edit.opened?n("devices-phone-settings-channel",{attrs:{device:e.device,channel:e.channel},on:{close:function(t){return e.handleCloseWindow(e.windowScreenTypes.EDIT)}}}):e._e()],1)}),[],!1,null,null,null).exports,I=n(780),C=n(712);!function(e){e.REMOVE_CONFIRMATION="removeConfirmation"}(j||(j={}));var D,E=Object(r.b)({name:"DevicesPhoneSettingsDevice",components:{DevicesPhoneSettingsDeviceChannel:y,DevicesSettingsDeviceRename:I.a,DevicesSettingsDeviceRemove:C.a},props:{device:{type:Object,required:!0},remoteFormSubmit:{type:Boolean,default:!1},remoteFormResult:{type:String,default:c.g.NONE},remoteFormReset:{type:Boolean,default:!1}},setup:function(e,t){var n=Object(r.j)(!1),o=Object(r.j)(c.g.NONE),l=Object(r.j)(!1),d=Object(r.j)(!1),m=Object(r.i)({removeConfirmation:{opened:!1}}),v=Object(r.a)((function(){return h.a.query().where("deviceId",e.device.id).orderBy("title").get()}));function f(e){m[e].opened=!1}return Object(r.g)((function(){d.value=!0})),Object(r.p)((function(){return n.value}),(function(e){d.value&&t.emit("update:remoteFormSubmit",e)})),Object(r.p)((function(){return o.value}),(function(e){d.value&&t.emit("update:remoteFormResult",e)})),Object(r.p)((function(){return l.value}),(function(e){d.value&&t.emit("update:remoteFormReset",e)})),Object(r.p)((function(){return e.remoteFormSubmit}),(function(e){d.value&&(n.value=e)})),Object(r.p)((function(){return e.remoteFormResult}),(function(e){d.value&&(o.value=e)})),Object(r.p)((function(){return e.remoteFormReset}),(function(e){d.value&&(l.value=e)})),{reRemoteFormSubmit:n,reRemoteFormResult:o,reRemoteFormReset:l,windowScreen:m,channels:v,handleOpenWindow:function(e){m[e].opened=!0},handleCloseWindow:f,handleRemoved:function(){f(j.REMOVE_CONFIRMATION),t.emit("removed")},windowScreenTypes:j,sizeTypes:c.J,listItemTypes:_.a}}}),N=(n(895),Object(T.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fb-devices-phone-settings-device__container"},[n("h3",{staticClass:"fb-devices-phone-settings-device__heading"},[e._v("\n    "+e._s(e.$t("devices.headings.aboutDevice"))+"\n  ")]),e._v(" "),n("fb-ui-content",{attrs:{ph:e.sizeTypes.SMALL,pv:e.sizeTypes.SMALL}},[n("devices-settings-device-rename",{attrs:{device:e.device,"remote-form-submit":e.reRemoteFormSubmit,"remote-form-result":e.reRemoteFormResult,"remote-form-reset":e.reRemoteFormReset},on:{"update:remoteFormSubmit":function(t){e.reRemoteFormSubmit=t},"update:remote-form-submit":function(t){e.reRemoteFormSubmit=t},"update:remoteFormResult":function(t){e.reRemoteFormResult=t},"update:remote-form-result":function(t){e.reRemoteFormResult=t},"update:remoteFormReset":function(t){e.reRemoteFormReset=t},"update:remote-form-reset":function(t){e.reRemoteFormReset=t}}})],1),e._v(" "),e.channels.length?n("fb-ui-items-container",{staticClass:"fb-devices-phone-settings-device__channels"},[n("template",{slot:"heading"},[e._v("\n      "+e._s(e.$t("devices.headings.channels"))+"\n    ")]),e._v(" "),e._l(e.channels,(function(t){return n("devices-phone-settings-device-channel",{key:t.id,attrs:{device:e.device,channel:t}})}))],2):e._e(),e._v(" "),n("fb-ui-items-container",[n("template",{slot:"heading"},[e._v("\n      "+e._s(e.$t("devices.headings.generalSettings"))+"\n    ")]),e._v(" "),n("list-item",{staticClass:"fb-devices-phone-settings-device__item fb-devices-phone-settings-device__item-remove",attrs:{variant:e.listItemTypes.DEFAULT},on:{click:function(t){return e.handleOpenWindow(e.windowScreenTypes.REMOVE_CONFIRMATION)}}},[n("template",{slot:"heading"},[e._v("\n        "+e._s(e.$t("devices.buttons.removeDevice.title"))+"\n      ")])],2)],2),e._v(" "),e.windowScreen.removeConfirmation.opened?n("devices-settings-device-remove",{attrs:{device:e.device,"transparent-bg":!1},on:{close:function(t){return e.handleCloseWindow(e.windowScreenTypes.REMOVE_CONFIRMATION)},removed:e.handleRemoved}}):e._e()],1)}),[],!1,null,null,null).exports);!function(e){e.DETAIL="detail",e.SETTINGS="settings"}(D||(D={}));var x=Object(r.b)({name:"DeviceDetailPage",components:{DevicesDetail:f.a,DevicesPhoneSettingsDevice:N},validate:function(e){var t=e.app,n=e.params;return t.$validateUUID(n.id)},transition:"fade",setup:function(){var e=Object(r.l)(),t=e.app.i18n,n=e.store,o=e.localePath,l=e.$routes,f=e.$validateUUID,h=e.error,_=e.$bus,O=Object(r.n)(),w=Object(r.o)();f(O.value.params.id)||h({statusCode:404,message:"Device Not Found"});var view=Object(r.i)({detail:{opened:!1},settings:{opened:!1}}),T=Object(r.j)(null),R=Object(r.j)(null),S=Object(r.j)(!1),j=Object(r.a)((function(){return n.state.app.windowSize})),F=Object(r.a)((function(){return v.a.query().with("device").with("channels").where("id",O.value.params.id).first()})),y=Object(r.a)((function(){return v.a.getters("fetching")()})),I=Object(r.a)((function(){return v.a.getters("getting")(O.value.params.id)})),C=Object(r.a)((function(){return y.value||I.value||null===F.value})),E=Object(r.j)(!1),N=Object(r.j)(c.g.NONE),x=Object(r.j)(!1);function A(e){switch(e){case D.DETAIL:w.push(o({name:l.devices.list}));break;case D.SETTINGS:view.detail.opened=!0,Object(r.d)((function(){view.settings.opened=!1,w.push(o({name:l.devices.detail,params:{id:O.value.params.id}}))}))}}return Object(r.e)((function(){0!==v.a.query().count()||y.value||I.value||v.a.getters("firstLoadFinished")()||v.a.get(O.value.params.id,!0).catch((function(e){404===d()(e,"exception.response.status",0)?h({statusCode:404,message:"Device Not Found"}):h({statusCode:503,message:"Something went wrong"})})),I.value||null!==F.value||h({statusCode:404,message:"Device Not Found"})})),Object(r.g)((function(){S.value=!0,window.setTimeout((function(){O.value.hash.includes(m.h)?view.settings.opened=!0:view.detail.opened=!0}),500),_.$emit("wait-page_reloading",!1)})),Object(r.p)((function(){return j.value}),(function(e){e!==c.J.EXTRA_SMALL&&S.value&&w.push(o({name:l.devices.list,hash:"".concat(m.g,"-").concat(O.value.params.id)}))})),Object(r.p)((function(){return I.value}),(function(e){!e&&null===F.value&&S.value&&h({statusCode:404,message:"Device Not Found"})})),Object(r.p)((function(){return F.value}),(function(e){null!==e&&n.dispatch("app/setHeading",{heading:e.name,subHeading:e.comment,icon:F.value?F.value.icon:null},{root:!0})})),Object(r.p)((function(){return N.value}),(function(e){e===c.g.WORKING&&S.value&&A(D.SETTINGS)})),Object(r.m)((function(){return{title:t.t("meta.devices.detail.title",{device:d()(F.value,"name")}).toString()}})),{id:O.value.params.id,view:view,isMounted:S,device:F,isLoading:C,fetchingDevices:y,fetchingDevice:I,detailComponent:T,settingsComponent:R,remoteFormSubmit:E,remoteFormResult:N,remoteFormReset:x,handleOpenView:function(e){switch(e){case D.DETAIL:break;case D.SETTINGS:view.detail.opened=!1,x.value=!0,Object(r.d)((function(){view.settings.opened=!0,w.push(o({name:l.devices.detail,params:{id:O.value.params.id},hash:m.h}))}))}},handleCloseView:A,handleSubmitUpdate:function(){E.value=!0},handleDeviceRemoved:function(){w.push(o(l.devices.list))},viewTypes:D,menuItemTypes:c.I}},head:{},meta:{hideTabs:!0}}),A=(n(897),Object(T.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["fb-devices-detail-view__container",{"fb-devices-detail-view__container-loading":e.isLoading}]},[n("client-only",[e.isLoading?n("fb-ui-loading-box",{staticClass:"fb-devices-detail-view__loading"},[n("p",[e._v("\n        "+e._s(e.$t("devices.texts.loadingDevice"))+"\n      ")])]):[e.view.settings.opened?e._e():n("fb-layout-header-button",{attrs:{type:e.menuItemTypes.BUTTON,small:"",left:""},on:{click:function(t){return e.handleCloseView(e.viewTypes.DETAIL)}}},[n("template",{slot:"icon"},[n("font-awesome-icon",{attrs:{icon:"angle-left"}})],1)],2),e._v(" "),e.view.settings.opened?n("fb-layout-header-button",{attrs:{label:e.$t("application.buttons.cancel.title"),type:e.menuItemTypes.BUTTON,small:"",left:""},on:{click:function(t){return e.handleCloseView(e.viewTypes.SETTINGS)}}}):e._e(),e._v(" "),e.view.settings.opened?e._e():n("fb-layout-header-button",{attrs:{label:e.$t("application.buttons.edit.title"),type:e.menuItemTypes.BUTTON,small:"",right:""},on:{click:function(t){return e.handleOpenView(e.viewTypes.SETTINGS)}}}),e._v(" "),e.view.settings.opened?n("fb-layout-header-button",{attrs:{label:e.$t("application.buttons.done.title"),type:e.menuItemTypes.BUTTON,small:"",right:""},on:{click:e.handleSubmitUpdate}}):e._e(),e._v(" "),n("fb-layout-header-spacer",{attrs:{small:""}}),e._v(" "),n("expandable-box",{attrs:{show:e.view.detail.opened}},[n("devices-detail",{attrs:{device:e.device}})],1),e._v(" "),n("expandable-box",{attrs:{show:e.view.settings.opened}},[n("devices-phone-settings-device",{staticClass:"fb-devices-detail-view__container-settings",attrs:{device:e.device,"remote-form-submit":e.remoteFormSubmit,"remote-form-result":e.remoteFormResult,"remote-form-reset":e.remoteFormReset},on:{"update:remoteFormSubmit":function(t){e.remoteFormSubmit=t},"update:remote-form-submit":function(t){e.remoteFormSubmit=t},"update:remoteFormResult":function(t){e.remoteFormResult=t},"update:remote-form-result":function(t){e.remoteFormResult=t},"update:remoteFormReset":function(t){e.remoteFormReset=t},"update:remote-form-reset":function(t){e.remoteFormReset=t},removed:e.handleDeviceRemoved}})],1)],e._v(" "),n("fb-ui-loading-box",{staticClass:"fb-devices-list-view__loading",attrs:{slot:"placeholder"},slot:"placeholder"},[n("p",[e._v("\n        "+e._s(e.$t("devices.texts.loadingDevice"))+"\n      ")])])],2)],1)}),[],!1,null,null,null));t.default=A.exports}}]);